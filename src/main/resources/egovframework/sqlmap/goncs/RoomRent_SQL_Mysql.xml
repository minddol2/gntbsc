<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="RoomRents">

    <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias  alias="RoomRentVO"       type = "egovframework.goncs.RoomRent.service.RoomRentVO"/>
    <typeAlias  alias="RoomRentVOs"       type = "egovframework.goncs.RoomRent.service.RoomRentVO"/>
    

	<select id="roomRentDAO.selectRoomRentList" parameterClass="RoomRentVO" resultClass="RoomRentVOs">
	    <![CDATA[
	    	SELECT 
        		*
   			FROM    tb_room_rent
        	WHERE 1=1
        ]]>
        <isNotEmpty property="datexx">
		     <![CDATA[   
				AND datexx = #datexx#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="timexx">
		     <![CDATA[   
				AND timexx LIKE CONCAT ('%', #timexx#,'%')
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id1">
		     <![CDATA[   
				AND room_id1 = #room_id1#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id2">
		     <![CDATA[   
				AND room_id2 = #room_id2#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="room_id3">
		     <![CDATA[   
				AND room_id3 = #room_id3#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="us_id">
		     <![CDATA[   
				AND us_id = #us_id#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="name">
		     <![CDATA[   
				AND name LIKE CONCAT ('%', #name#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="mobile">
		     <![CDATA[   
				AND mobile LIKE CONCAT ('%', #mobile#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="sdate">
            <isNotEmpty property="edate">
            	AND DATE_FORMAT(reg_date,'%Y-%m-%d') BETWEEN #sdate# AND #edate#
            </isNotEmpty>
        </isNotEmpty>
        <isNotEmpty property="status">
            <isNotEqual property="status" compareValue="0">
            	AND status = #status#
            </isNotEqual>
        </isNotEmpty>
		<![CDATA[ 
			ORDER BY idx desc
			LIMIT 20
		]]>
    </select>
    
	<select id="roomRentDAO.selectRoomRentListw" parameterClass="RoomRentVO" resultClass="RoomRentVOs">
	    <![CDATA[
	    	SELECT 
        		*
   			FROM    tb_room_rent
        	WHERE 1=1
        ]]>
        <isNotEmpty property="datexx">
		     <![CDATA[   
				AND datexx = #datexx#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="timexx">
		     <![CDATA[   
				AND timexx LIKE CONCAT ('%', #timexx#,'%')
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id1">
		     <![CDATA[   
				AND room_id1 = #room_id1#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id2">
		     <![CDATA[   
				AND room_id2 = #room_id2#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="room_id3">
		     <![CDATA[   
				AND room_id3 = #room_id3#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="us_id">
		     <![CDATA[   
				AND us_id = #us_id#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="name">
		     <![CDATA[   
				AND name LIKE CONCAT ('%', #name#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="mobile">
		     <![CDATA[   
				AND mobile LIKE CONCAT ('%', #mobile#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="sdate">
            <isNotEmpty property="edate">
            	AND DATE_FORMAT(reg_date,'%Y-%m-%d') BETWEEN #sdate# AND #edate#
            </isNotEmpty>
        </isNotEmpty>
        <isNotEmpty property="status">
            <isNotEqual property="status" compareValue="0">
            	AND status = #status#
            </isNotEqual>
        </isNotEmpty>
		<![CDATA[ 
			ORDER BY idx desc
			LIMIT  #recordCountPerPage# OFFSET #firstIndex#
		]]>
    </select>
    
	<select id="roomRentDAO.selectRoomRentListCnt" parameterClass="RoomRentVO" resultClass="int">
	    <![CDATA[
	    	SELECT 
        		COUNT(idx) AS totcnt
   			FROM    tb_room_rent
        	WHERE 1=1
        ]]>
        <isNotEmpty property="datexx">
		     <![CDATA[   
				AND datexx = #datexx#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="timexx">
		     <![CDATA[   
				AND timexx LIKE CONCAT ('%', #timexx#,'%')
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id1">
		     <![CDATA[   
				AND room_id1 = #room_id1#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id2">
		     <![CDATA[   
				AND room_id2 = #room_id2#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="room_id3">
		     <![CDATA[   
				AND room_id3 = #room_id3#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="us_id">
		     <![CDATA[   
				AND us_id = #us_id#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="name">
		     <![CDATA[   
				AND name LIKE CONCAT ('%', #name#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="mobile">
		     <![CDATA[   
				AND mobile LIKE CONCAT ('%', #mobile#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="sdate">
            <isNotEmpty property="edate">
            	AND DATE_FORMAT(reg_date,'%Y-%m-%d') BETWEEN #sdate# AND #edate#
            </isNotEmpty>
        </isNotEmpty>
        <isNotEmpty property="status">
            <isNotEqual property="status" compareValue="0">
            	AND status = #status#
            </isNotEqual>
        </isNotEmpty>
    </select>
    
	<insert id="roomRentDAO.insertRoomRent_info" parameterClass="RoomRentVO">
        <![CDATA[
            INSERT INTO tb_room_rent 
                  ( datexx
                  , timexx
                  , room_id1
                  , room_id2
                  , room_id3
                  , us_id
                  , name
                  , mobile
                  , company
                  , people_cnt
                  , content1
                  , content2
                  , etc
                  , status
                  , refuse_txt
                  , sys_id
                  , com_ip
                  , reg_date )
           VALUES ( #datexx#
                  , #timexx#
                  , #room_id1#
                  , #room_id2#
                  , #room_id3#
                  , #us_id#
                  , #name#
                  , #mobile#
                  , #company#
                  , #people_cnt#
                  , #content1#
                  , #content2#
                  , #etc#
                  , #status#
                  , #refuse_txt#
                  , #sys_id#
                  , #com_ip#
                  , now() )
        ]]>
    </insert>
    
	<update id="roomRentDAO.updateRoomRent_info" parameterClass="RoomRentVO">
        <![CDATA[
            UPDATE tb_room_rent 
               SET datexx = #datexx#, 
               	   timexx = #timexx#,
               	   room_id1 = #room_id1#,
               	   room_id2 = #room_id2#,
               	   room_id3 = #room_id3#,
               	   us_id = #us_id#,
               	   name = #name#,
               	   mobile = #mobile#,
               	   company = #company#,
               	   people_cnt = #people_cnt#,
               	   content1 = #content1#,
               	   content2 = #content2#,
               	   etc = #etc#,
               	   status = #status#,
               	   refuse_txt = #refuse_txt#,
               	   sys_id = #sys_id#,
               	   com_ip = #com_ip# 
             WHERE idx = #idx#
        ]]>
    </update>
    
	<update id="roomRentDAO.changeRoomRent_info" parameterClass="RoomRentVO">
        <![CDATA[
            UPDATE tb_room_rent 
               SET status = #status#,
        ]]>
               <isNotEmpty property="refuse_txt">
                refuse_txt  = #refuse_txt#,
               </isNotEmpty>
        <![CDATA[
               	   sys_id = #sys_id#,
               	   com_ip = #com_ip# 
             WHERE idx = #idx#
        ]]>
    </update>
	
	<select id="roomRentDAO.selectRoomRent" parameterClass="RoomRentVO" resultClass="RoomRentVOs">
		<![CDATA[
			SELECT *
			FROM tb_room_rent
			WHERE 1=1
        ]]>
        <isNotEmpty property="idx">
		     <isNotEqual property="idx" compareValue="0">
		     <![CDATA[   
				AND idx = #idx#
			]]> 
			</isNotEqual>
		</isNotEmpty>
		<isNotEmpty property="datexx">
		     <![CDATA[   
				AND datexx = #datexx#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="timexx">
		     <![CDATA[   
				AND timexx LIKE CONCAT ('%', #timexx#,'%')
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id1">
		     <![CDATA[   
				AND room_id1 = #room_id1#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="room_id2">
		     <![CDATA[   
				AND room_id2 = #room_id2#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="room_id3">
		     <![CDATA[   
				AND room_id3 = #room_id3#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="us_id">
		     <![CDATA[   
				AND us_id = #us_id#
			]]> 
		</isNotEmpty>
		<isNotEmpty property="name">
		     <![CDATA[   
				AND name LIKE CONCAT ('%', #name#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="mobile">
		     <![CDATA[   
				AND mobile LIKE CONCAT ('%', #mobile#,'%') 
			]]> 
		</isNotEmpty>
		<isNotEmpty property="sdate">
            <isNotEmpty property="edate">
            	AND DATE_FORMAT(reg_date,'%Y-%m-%d') BETWEEN #sdate# AND #edate#
            </isNotEmpty>
        </isNotEmpty>
        <isNotEmpty property="status">
            <isNotEqual property="status" compareValue="0">
            	AND status = #status#
            </isNotEqual>
        </isNotEmpty>
	</select>
	
	<select id="roomRentDAO.selectRoomRent2" parameterClass="RoomRentVO" resultClass="RoomRentVOs">
		<![CDATA[
			SELECT *
			FROM tb_room_rent
			WHERE 1=1
        ]]>
        <isNotEmpty property="idx">
            <isNotEqual property="idx" compareValue="0">
		     <![CDATA[   
				AND idx = #idx#
			]]> 
			</isNotEqual>
		</isNotEmpty>
        <isNotEmpty property="datexx">
		     <![CDATA[   
				AND datexx = #datexx#
			]]> 
		</isNotEmpty>
        <isNotEmpty property="timexx">
		     <![CDATA[   
   				AND timexx LIKE CONCAT ('%', #timexx#,'%')
   			]]>
		</isNotEmpty>
		<isNotEmpty property="room_id1">
		     <![CDATA[   
				AND (room_id1 = #room_id1# or room_id2 = #room_id1# or room_id3 = #room_id1#)
			]]> 
		</isNotEmpty>
        <isNotEmpty property="status">
            <isEqual property="status" compareValue="1">
             	<![CDATA[   AND status = #status#	]]> 
            </isEqual>
            <isEqual property="status" compareValue="2">
               <![CDATA[ AND status = #status#	]]> 
            </isEqual>
            <isEqual property="status" compareValue="3">
               <![CDATA[ AND status = #status#	]]> 
            </isEqual>
            <isEqual property="status" compareValue="5">
               <![CDATA[ AND (status = '1' or status = '2')	]]> 
            </isEqual>
        </isNotEmpty>
	</select>
	
	<select id="roomRentDAO.selectRoomRent3" resultClass="RoomRentVOs">
		<![CDATA[
			SELECT *
			FROM tb_room_rent
			WHERE 1=1
			AND idx = #idx#
        ]]>
	</select>
	
	<delete id="roomRentDAO.deleteRoomRent">
        <![CDATA[
            delete 
            from tb_room_rent
            WHERE idx = #idx#
        ]]>
    </delete>
    
</sqlMap>	